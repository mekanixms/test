/*

 jQuery UI dialog extra v0.7

 Copyright 2011, Mark Prisyazhnyuk (nixmrak)
 Licensed under GPL Version 2 licenses.


 Usage:
     $.dialog({canMaximize:true, canMinimize:true})

 Idea based on: Extension of JQuery UI Dialog widget to add custom minimizing capabilities (by Ryan Curtis)

*/
(function(a){a.extend(a.ui.dialog.prototype.options,{canMaximize:!1,canMinimize:!1});var f=a.ui.dialog.prototype._init;a.ui.dialog.prototype._init=function(){var b=this;f.apply(this,arguments);uiDialogTitlebar=this.uiDialogTitlebar;this._savePosition();this.resizeableHandle=this.uiDialog.resizable().find(".ui-resizable-se");this.titlebarHeight=parseInt(uiDialogTitlebar.css("height"))+parseInt(uiDialogTitlebar.css("padding-top"))+parseInt(uiDialogTitlebar.css("padding-bottom"))+parseInt(this.uiDialog.css("padding-top"))+
parseInt(this.uiDialog.css("padding-bottom"));var c=b.uiDialogTitlebarMinimize=a('<a href="#"></a>').addClass("dialog-minimize ui-dialog-titlebar-min ui-corner-all").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).focus(function(){c.addClass("ui-state-focus")}).blur(function(){c.removeClass("ui-state-focus")}).click(function(a){b.minimize();return!1}).css({position:"absolute",right:24,marginTop:-10,top:"50%"});b.options.canMinimize&&
c.appendTo(uiDialogTitlebar);(b.uiDialogTitlebarMinimizeText=a("<span></span>")).addClass("ui-icon ui-icon-minusthick").text("minimize").appendTo(c);var d=b.uiDialogTitlebarRest=a('<a href="#"></a>').addClass("dialog-restore ui-dialog-titlebar-rest ui-corner-all").attr("role","button").hover(function(){d.addClass("ui-state-hover")},function(){d.removeClass("ui-state-hover")}).focus(function(){d.addClass("ui-state-focus")}).blur(function(){d.removeClass("ui-state-focus")}).click(function(a){b.restore();
return!1}).css({position:"absolute",right:24,marginTop:-10,top:"50%"}).appendTo(uiDialogTitlebar).hide();(b.uiDialogTitlebarRestText=a("<span></span>")).addClass("ui-icon ui-icon-newwin").text("minimize").appendTo(d);this.uiDialog.bind("dialogbeforeclose",function(a,c){b.uiDialogTitlebarRest.hide();b.uiDialogTitlebarMinimize.show()});var e=b.uiDialogTitlebarMaximize=a('<a href="#"></a>').addClass("dialog-maximize ui-dialog-titlebar-max ui-corner-all").attr("role","button").hover(function(){e.addClass("ui-state-hover")},
function(){e.removeClass("ui-state-hover")}).focus(function(){e.addClass("ui-state-focus")}).blur(function(){e.removeClass("ui-state-focus")}).click(function(a){b.maximize();return!1}).css({position:"absolute",right:45,marginTop:-10,top:"50%"});b.options.canMaximize&&(e.appendTo(uiDialogTitlebar),b.options.canMinimize||e.css({right:24}));(b.uiDialogTitlebarMaximizeText=a("<span></span>")).addClass("ui-icon ui-icon-arrow-4-diag").text("maximize").appendTo(e);this.uiDialog.bind("dialogbeforeclose",
function(a,c){b.uiDialogTitlebarRest.hide();b.uiDialogTitlebarMinimize.show();b.uiDialogTitlebarMaximize.show()})};a.extend(a.ui.dialog.prototype,{_savePosition:function(){this.options.originalWidth=this.options.width;this.options.originalHeight=this.options.height;this.options.originalLeft=this.uiDialog.offset().left;this.options.originalTop=this.uiDialog.offset().top},_restorePosition:function(){this.uiDialog.css({left:this.options.originalLeft,top:this.options.originalTop})},_restoreSize:function(){this.uiDialog.css({height:this.options.originalHeight,
width:this.options.originalWidth})},_maximizedResizeHandler:function(b){var c=a(window).height()-11,d=a(window).width()-11;b.data.dialogObject.uiDialog.css({top:1,left:1,width:d,height:c})},restore:function(){this._makeResizable();this._makeDraggable();this.uiDialog.draggable("_generatePosition");a(window).unbind("resize",this._maximizedResizeHandler);"maximized"==this.options.currentState&&this._restorePosition();this._restoreSize();this.element.show();this.resizeableHandle.show();this.uiDialogTitlebarRest.hide();
this.uiDialogTitlebarMinimize.show();this.uiDialogTitlebarMaximize.show();this.options.currentState="normal"},minimize:function(){this.uiDialog.resizable("destroy");this._savePosition();this.uiDialog.animate({width:200,height:this.titlebarHeight},200);this.element.hide();this.uiDialogTitlebarMaximize.show();this.uiDialogTitlebarMinimize.hide();this.uiDialogTitlebarRest.show();this.resizeableHandle.hide();this.options.currentState="minimized"},maximize:function(){"minimized"!=this.options.currentState&&
this.uiDialog.resizable("destroy");this.uiDialog.draggable("destroy");this._savePosition();var b=a(window).height()-11,c=a(window).width()-11;this.uiDialog.animate({top:1,left:1,width:c,height:b},200);a(window).bind("resize",{dialogObject:this},this._maximizedResizeHandler);this.element.show();this.element.css({width:"auto",height:"auto"});this.uiDialogTitlebarMaximize.hide();this.uiDialogTitlebarMinimize.hide();this.uiDialogTitlebarRest.show();this.resizeableHandle.hide();this.options.currentState=
"maximized"}})})(jQuery);
